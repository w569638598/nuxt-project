import{defineComponent as e,ref as t,h as a,resolveComponent as r,computed as l}from"vue";import{v as n,l as u,n as i,x as o,y as s}from"../runtime.mjs";import{u as v,n as c,r as f,b as d,c as p,d as h}from"./server.mjs";async function preloadRouteComponents(e,t=v()){}function defineNuxtLink(o){const s=o.componentName||"NuxtLink";function resolveTrailingSlashBehavior(e,t){if(!e||"append"!==o.trailingSlash&&"remove"!==o.trailingSlash)return e;if("string"==typeof e)return applyTrailingSlashBehavior(e,o.trailingSlash);const a="path"in e&&void 0!==e.path?e.path:t(e).path;return{...e,name:void 0,path:applyTrailingSlashBehavior(a,o.trailingSlash)}}function useNuxtLink(e){var t,a,n;const o=v(),s=h(),c=l((()=>!!e.target&&"_self"!==e.target)),p=l((()=>{const t=e.to||e.href||"";return"string"==typeof t&&u(t,{acceptRelative:!0})})),g=r("RouterLink"),y=g&&"string"!=typeof g?g.useLink:void 0,m=l((()=>{if(e.external)return!0;const t=e.to||e.href||"";return"object"!=typeof t&&(""===t||p.value)})),x=l((()=>{const t=e.to||e.href||"";return m.value?t:resolveTrailingSlashBehavior(t,o.resolve)})),S=m.value||null==y?void 0:y({...e,to:x}),q=l((()=>{var e,t;if(!x.value||p.value)return x.value;if(m.value){const e="object"==typeof x.value&&"path"in x.value?f(x.value):x.value;return resolveTrailingSlashBehavior("object"==typeof e?o.resolve(e).href:e,o.resolve)}return"object"==typeof x.value?null!=(e=null==(t=o.resolve(x.value))?void 0:t.href)?e:null:resolveTrailingSlashBehavior(i(s.app.baseURL,x.value),o.resolve)}));return{to:x,hasTarget:c,isAbsoluteUrl:p,isExternal:m,href:q,isActive:null!=(t=null==S?void 0:S.isActive)?t:l((()=>x.value===o.currentRoute.value.path)),isExactActive:null!=(a=null==S?void 0:S.isExactActive)?a:l((()=>x.value===o.currentRoute.value.path)),route:null!=(n=null==S?void 0:S.route)?n:l((()=>o.resolve(x.value))),async navigate(){await d(q.value,{replace:e.replace,external:m.value||c.value})}}}return e({name:s,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},prefetchOn:{type:[String,Object],default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1}},useLink:useNuxtLink,setup(e,{slots:l}){const u=v(),{to:i,href:s,navigate:c,isExternal:d,hasTarget:h,isAbsoluteUrl:g}=useNuxtLink(e),y=t(!1);async function prefetch(e=p()){if(y.value)return;y.value=!0;const t="string"==typeof i.value?i.value:d.value?f(i.value):u.resolve(i.value).fullPath;await Promise.all([e.hooks.callHook("link:prefetch",t).catch((()=>{})),!d.value&&!h.value&&preloadRouteComponents(i.value,u).catch((()=>{}))])}return()=>{var t;if(!d.value&&!h.value){const t={ref:undefined,to:i.value,activeClass:e.activeClass||o.activeClass,exactActiveClass:e.exactActiveClass||o.exactActiveClass,replace:e.replace,ariaCurrentValue:e.ariaCurrentValue,custom:e.custom};return e.custom||(function(t){var a,r,l,n;return!y.value&&("string"==typeof e.prefetchOn?e.prefetchOn===t:null!=(a=null==(l=e.prefetchOn)?void 0:l[t])?a:null==(n=o.prefetchOn)?void 0:n[t])&&!1!==(null!=(r=e.prefetch)?r:o.prefetch)&&!0!==e.noPrefetch&&"_blank"!==e.target&&!0}("interaction")&&(t.onPointerenter=prefetch.bind(null,void 0),t.onFocus=prefetch.bind(null,void 0)),y.value&&(t.class=e.prefetchedClass||o.prefetchedClass),t.rel=e.rel||void 0),a(r("RouterLink"),t,l.default)}const u=e.target||null,v=((...e)=>e.find((e=>void 0!==e)))(e.noRel?"":e.rel,o.externalRelAttribute,g.value||h.value?"noopener noreferrer":"")||null;return e.custom?l.default?l.default({href:s.value,navigate:c,prefetch:prefetch,get route(){if(!s.value)return;const e=new URL(s.value,"http://localhost");return{path:e.pathname,fullPath:e.pathname,get query(){return n(e.search)},hash:e.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:s.value}},rel:v,target:u,isExternal:d.value||h.value,isActive:!1,isExactActive:!1}):null:a("a",{ref:undefined,href:s.value||null,rel:v,target:u},null==(t=l.default)?void 0:t.call(l))}}})}const g=defineNuxtLink(c);function applyTrailingSlashBehavior(e,t){const a="append"===t?o:s;return u(e)&&!e.startsWith("http")?e:a(e,!0)}export{g as _};
